function XqLightBox(t){this.currentImgIndex=0,this.currentScale=1,this.currentSrc="",this.currentImgName="",this.isScale=!1,this.isMouseUp="",this.imgList=[],this.imgCls=t.imgCls,this.init()}XqLightBox.prototype.init=function(){this.addLightBoxElem()},XqLightBox.prototype.addLightBoxElem=function(){let t=`\n    <div class="lightbox-title">\n        <span>\n        图片预览\n        </span>\n        <div>\n            (<strong id="lightbox-current">0</strong>/<strong id="lightbox-total">${this.imgList.length}</strong>) \n            <span class="lightbox-name">【<span id="lightbox-name">图片名称</span>】</span> \n        </div>\n        <p>\n            <i class="lightbox-download plugin plugin-download"></i>\n            <i class="lightbox-scale plugin plugin-fullscreen"></i>\n            <i class="plugin plugin-times"></i>\n        </p>\n    </div>\n    <div class="lightbox-content">\n        <div class="lightbox-ls">\n            <div class="lightbox-arrow lightbox-arrow-left">\n                <i class="plugin plugin-arrow-left"></i>\n            </div>\n            <ul class="lightbox-list">\n                <li>\n                    <a class="lightbox-link" href="" target="_blank">\n                        <img class="lightbox-img" src="" alt="">\n                    </a>\n                </li>\n            </ul>\n            <div class="lightbox-arrow lightbox-arrow-right">\n                <i class="plugin plugin-arrow-right"></i>\n            </div>\n        </div>\n    </div>`,e=document.createElement("div");e.className="lightbox",e.innerHTML=`\n    <!-- lightbox start -->\n    ${t}\n    <!-- lightbox end -->\n    `,document.body.appendChild(e),window.onload=(()=>{this.getImgs()})},XqLightBox.prototype.getImgs=function(){let t=document.querySelectorAll(this.imgCls+" img"),e=this;t&&t.length&&(t.forEach(function(t,i){let n=t.getAttribute("src"),l=t.getAttribute("alt")||`img${i+1}`;e.imgList.push({id:i+1,url:n,name:l}),t.setAttribute("data-index",i)}),this.addImgClick(),this.addIconEvent(),this.addArrow())},XqLightBox.prototype.addImgClick=function(){let t=document.querySelectorAll(`${this.imgCls} img`);if(0!==t.length)for(let e=0;e<t.length;e++){let i=this,n=t[e];n.addEventListener("click",function(t){let e=t.target.dataset.index;i.showLightBox(e)},!1)}},XqLightBox.prototype.showLightBox=function(t){let e=document.querySelector(".lightbox");e.classList.add("active"),document.body.className="hidden",this.currentImgIndex=Number(t),this.currentScale=1,this.showImg()},XqLightBox.prototype.addArrow=function(){let t=document.querySelector(".lightbox-arrow-left"),e=document.querySelector(".lightbox-arrow-right"),i=document.querySelector(".lightbox-download"),n=this;window.addEventListener("mousewheel",function(t){n.handleScroll(t)},!1),t.addEventListener("click",function(){n.prevImg()},!1),e.addEventListener("click",function(){n.nextImg()},!1),i.addEventListener("click",function(){n.downloadImg()},!1)},XqLightBox.prototype.showImg=function(){let t=document.querySelector(".lightbox-img"),e=document.querySelector("#lightbox-current"),i=document.querySelector("#lightbox-name"),n=document.querySelector(".lightbox-link");e.innerText=this.currentImgIndex+1,i.innerText=this.imgList[this.currentImgIndex].name,n.href=this.imgList[this.currentImgIndex].url,t.src=this.imgList[this.currentImgIndex].url,t.style.transform=`scale(${this.currentScale})`,this.currentScale=1},XqLightBox.prototype.addIconEvent=function(){let t=document.querySelector(".lightbox-scale"),e=document.querySelector(".plugin-times"),i=document.getElementById("lightbox-total");t.className=this.isScale?"lightbox-scale plugin plugin-fullscreen-exit":"lightbox-scale plugin plugin-fullscreen";let n=this;t.addEventListener("click",function(){n.scaleImg()},!1),e.addEventListener("click",this.closeLightBox,!1),i.innerText=this.imgList.length},XqLightBox.prototype.handleScroll=function(t){let e=document.querySelector(".lightbox-img");this.isMouseUp=!(t.deltaY>0),this.isMouseUp&&this.currentScale<3&&(this.currentScale+=.2),!this.isMouseUp&&this.currentScale>.4&&(this.currentScale-=.2),e.style.transform=`scale(${this.currentScale})`},XqLightBox.prototype.scaleImg=function(){let t=document.querySelector(".lightbox-scale");this.isScale=!this.isScale,t.className=this.isScale?"lightbox-scale plugin plugin-fullscreen-exit":"lightbox-scale plugin plugin-fullscreen",this.isScale?this.fullScreenOpen():this.fullScreenCancel()},XqLightBox.prototype.downloadImg=function(){let t=document.querySelector(".lightbox-img").src,e=t.split("/");e=e[e.length-1],e=e.indexOf("?")>-1?e.split("?")[0]:e;let i=document.createElement("a"),n=new Blob([t]);i.download="xqlight-"+e,i.href=URL.createObjectURL(n),i.click(),URL.revokeObjectURL(n)},XqLightBox.prototype.closeLightBox=function(){let t=document.querySelector(".lightbox");document.body.className="",t.classList.remove("active")},XqLightBox.prototype.prevImg=function(){this.currentImgIndex>0&&this.currentImgIndex<=this.imgList.length-1?(this.currentImgIndex--,this.showImg()):(this.currentImgIndex=this.imgList.length,this.currentImgIndex--,this.showImg())},XqLightBox.prototype.nextImg=function(){this.currentImgIndex<this.imgList.length-1?(this.currentImgIndex++,this.showImg()):(this.currentImgIndex=-1,this.currentImgIndex++,this.showImg())},XqLightBox.prototype.fullScreenOpen=function(){var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()},XqLightBox.prototype.fullScreenCancel=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()};