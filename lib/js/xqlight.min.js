function XqLightBox(t){this.currentImgIndex=0,this.currentScale=1,this.currentSrc="",this.currentImgName="",this.isScale=!1,this.isMouseUp="",this.imgList=[],this.imgCls=t.imgCls,this.init()}XqLightBox.prototype.init=function(){this.getImgs(),this.addLightBoxElem(),this.addImgClick(),this.addIconEvent()},XqLightBox.prototype.getImgs=function(){let t=document.querySelectorAll(this.imgCls+" img"),e=this;t&&t.length&&t.forEach(function(t,i){let n=t.getAttribute("src"),l=t.getAttribute("alt")||`img${i+1}`;e.imgList.push({id:i+1,url:n,name:l}),t.setAttribute("data-index",i)})},XqLightBox.prototype.addLightBoxElem=function(){let t=`\n    <div class="lightbox-title">\n        <span>\n        图片预览\n        </span>\n        <div>\n            (<strong id="lightbox-current">0</strong>/<strong id="lightbox-total">${this.imgList.length}</strong>) \n            <span class="lightbox-name">【<span id="lightbox-name">图片名称</span>】</span> \n        </div>\n        <p>\n            <i class="lightbox-scale fa"></i>\n            <i class="fa fa-times"></i>\n        </p>\n    </div>\n    <div class="lightbox-content">\n        <div class="lightbox-ls">\n            <div class="lightbox-arrow lightbox-arrow-left">\n                &lt;\n            </div>\n            <ul class="lightbox-list">\n                <li>\n                    <a class="lightbox-link" href="" target="_blank">\n                        <img class="lightbox-img" src="" alt="">\n                    </a>\n                </li>\n            </ul>\n            <div class="lightbox-arrow lightbox-arrow-right">\n                &gt;\n            </div>\n        </div>\n    </div>`,e=document.createElement("div");e.className="lightbox",e.innerHTML=`\n    <!-- lightbox start -->\n    ${t}\n    <!-- lightbox end -->\n    `,document.body.appendChild(e)},XqLightBox.prototype.addImgClick=function(){let t=document.querySelectorAll(`${this.imgCls} img`);if(0!==t.length)for(const e of t){let t=this;e.addEventListener("click",function(e){let i=e.target.dataset.index;t.currentImgIndex=parseInt(i),t.showLightBox()},!1)}},XqLightBox.prototype.showLightBox=function(){let t=document.querySelector(".lightbox");t.classList.add("active"),document.body.className="hidden",this.currentScale=1,this.showImg(),this.addArrow()},XqLightBox.prototype.addArrow=function(){let t=document.querySelector(".lightbox-arrow-left"),e=document.querySelector(".lightbox-arrow-right"),i=this;window.addEventListener("mousewheel",function(t){i.handleScroll(t)},!1),t.addEventListener("click",function(){i.prevImg()},!1),e.addEventListener("click",function(){i.nextImg()},!1)},XqLightBox.prototype.showImg=function(){let t=document.querySelector(".lightbox-img"),e=document.querySelector("#lightbox-current"),i=document.querySelector("#lightbox-name"),n=document.querySelector(".lightbox-link");e.innerText=this.currentImgIndex+1,i.innerText=this.imgList[this.currentImgIndex].name,n.href=this.imgList[this.currentImgIndex].url,t.src=this.imgList[this.currentImgIndex].url,t.style.transform=`scale(${this.currentScale})`,this.currentScale=1},XqLightBox.prototype.addIconEvent=function(){let t=document.querySelector(".lightbox-scale"),e=document.querySelector(".fa-times");t.className=this.isScale?"lightbox-scale fa fa-compress":"lightbox-scale fa fa-arrows-alt";let i=this;t.addEventListener("click",function(){i.scaleImg()},!1),e.addEventListener("click",this.closeLightBox,!1)},XqLightBox.prototype.handleScroll=function(t){let e=document.querySelector(".lightbox-img");this.isMouseUp=!(t.deltaY>0),this.isMouseUp&&this.currentScale<3&&(this.currentScale+=.2),!this.isMouseUp&&this.currentScale>.4&&(this.currentScale-=.2),e.style.transform=`scale(${this.currentScale})`},XqLightBox.prototype.scaleImg=function(){let t=document.querySelector(".lightbox-scale");this.isScale=!this.isScale,t.className=this.isScale?"lightbox-scale fa fa-compress":"lightbox-scale fa fa-arrows-alt",this.isScale?this.fullScreenOpen():this.fullScreenCancel()},XqLightBox.prototype.closeLightBox=function(){let t=document.querySelector(".lightbox");document.body.className="",t.classList.remove("active")},XqLightBox.prototype.prevImg=function(){this.currentImgIndex>0&&this.currentImgIndex<=this.imgList.length?this.currentImgIndex-=1:this.currentImgIndex=this.imgList.length-1,this.showImg()},XqLightBox.prototype.nextImg=function(){this.currentImgIndex==this.imgList.length-1?this.currentImgIndex=0:this.currentImgIndex+=1,this.showImg()},XqLightBox.prototype.fullScreenOpen=function(){var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()},XqLightBox.prototype.fullScreenCancel=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()};